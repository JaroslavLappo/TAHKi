var ctx;var mainVolume;var shoot_sound={};function SoundInit(a){window.AudioContext=(window.AudioContext||window.webkitAudioContext||null);if(!AudioContext){throw new Error("AudioContext not supported!")}ctx=new AudioContext();mainVolume=ctx.createGain();mainVolume.connect(ctx.destination);var b=new XMLHttpRequest();b.open("GET",a,true);b.responseType="arraybuffer";b.onload=function(d){ctx.decodeAudioData(this.response,function f(e){shoot_sound=e},function c(){alert("Decoding the audio buffer failed")})};b.send()}function Sound(a){this.source=ctx.createBufferSource();this.volume=ctx.createGain();this.source.connect(this.volume);this.panner=ctx.createPanner();this.volume.connect(this.panner);this.panner.connect(mainVolume);this.source.loop=false;this.source.buffer=this.buffer=shoot_sound;var b=new THREE.Vector3();b.setFromMatrixPosition(a);this.panner.setPosition(b.x,b.y,b.z);camera.updateMatrixWorld();var d=new THREE.Vector3();d.setFromMatrixPosition(camera.matrixWorld);ctx.listener.setPosition(d.x,d.y,d.z);this.source.start(ctx.currentTime)};